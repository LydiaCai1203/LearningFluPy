# Docker 开发

## 构建尽量小的 Image

+ 从基础镜像开始
+ 使用多阶段构建。意味着最终 Image 不包括构建所引入的所有库和依赖项，而仅包括运行他们所需要的组件和环境。
    + 如果您需要使用不包含多阶段构建的Docker版本，尽可能将多个命令合并为RUN一行并使用Shell的机制将它们组合在一起来实现此目的。
+ 如果有很多个相似的 Image, 则尝试创建一个基础 Image。这样 Docker 只需要加载一次公共层，然后将它们缓存。这样加载更快。

+ 考虑将生产 Image 作为测试 Image 的基础镜像。
+ 在构建 Image 时，始终打上有意义的 tag, 而不要依赖自动的 lastest tag。比如 prod、test、stability，或其它的 tag 用来区分环境。

